{"version":3,"file":"NewArrivalsSection-IfmmO0D8.js","sources":["../../src/pagesHome/HomeSections/NewArrivalsSection.tsx"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\nimport { Button } from '../../components/ui/button';\nimport { Product } from '../Home';\nimport { useNavigate } from 'react-router-dom';\n\ninterface NewArrivalsSectionProps {\n  newArrivals: Product[];\n  currentSlide: number;\n  onSlideChange: (direction: 'next' | 'prev') => void;\n  lastProductRef: (node: HTMLDivElement | null) => void;\n  renderProductCard: (product: Product, isLazy?: boolean, className?: string) => JSX.Element;\n  isMobile: boolean;\n  isLoading?: boolean;\n}\n\nconst NewArrivalsSection: React.FC<NewArrivalsSectionProps> = ({\n  newArrivals,\n  currentSlide,\n  onSlideChange,\n  lastProductRef,\n  renderProductCard,\n  isMobile,\n  isLoading = false,\n}) => {\n  // Для мобильной версии: по 2 карточки на слайд, для десктопа – 4\n  const itemsPerPage = isMobile ? 2 : 4;\n  const totalSlides = Math.ceil(newArrivals.length / itemsPerPage);\n\n  const navigate = useNavigate();\n\n  // Локальное состояние для текущего слайда в мобильной версии,\n  // которое обновляется при скролле контейнера\n  const [mobileCurrentSlide, setMobileCurrentSlide] = useState(0);\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  const handleScroll = () => {\n    if (containerRef.current) {\n      const scrollLeft = containerRef.current.scrollLeft;\n      const slideWidth = containerRef.current.clientWidth;\n      const index = Math.round(scrollLeft / slideWidth);\n      setMobileCurrentSlide(index);\n    }\n  };\n\n  const handleViewAll = () => {\n    // Переход на страницу каталога товаров без фильтрации\n    navigate('/tires');\n  };\n\n  // Для мобильной версии группируем товары по слайдам (каждый слайд – сетка из 2 карточек)\n  const slides = isMobile\n    ? Array.from({ length: totalSlides }, (_, slideIndex) =>\n        newArrivals.slice(slideIndex * itemsPerPage, (slideIndex + 1) * itemsPerPage)\n      )\n    : [];\n\n  return (\n    <section id=\"new\" className=\"mb-10\">\n      <div className=\"flex items-center mb-10 gap-6 sm:gap-12 justify-center lg:justify-between\">\n        <h2 className=\"text-2xl lg:text-3xl font-bold text-center lg:text-left\">\n          Нові надходження\n        </h2>\n        {/* Стрелки для десктопа */}\n        {!isMobile && !isLoading && newArrivals.length > 0 && (\n          <div className=\"flex items-center space-x-6\">\n            <Button\n              style={{ touchAction: 'manipulation' }}\n              className=\"bg-blue-600/80 text-white active:bg-blue-600/90 transition-transform duration-150 active:scale-110 hover:bg-blue-400\"\n              size=\"icon\"\n              onPointerUp={() => onSlideChange('prev')}\n            >\n              <ChevronLeft className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              style={{ touchAction: 'manipulation' }}\n              className=\"bg-blue-600/80 text-white active:bg-blue-600/90 transition-transform duration-150 active:scale-110 hover:bg-blue-400\"\n              size=\"icon\"\n              onPointerUp={() => onSlideChange('next')}\n            >\n              <ChevronRight className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        )}\n      </div>\n\n      {isMobile ? (\n        <div\n          ref={containerRef}\n          onScroll={handleScroll}\n          className=\"relative overflow-x-auto rounded-[12px] scroll-smooth snap-x snap-mandatory\"\n          style={{ WebkitOverflowScrolling: 'touch' }}\n        >\n          <div className=\"flex\">\n            {slides.map((slide, slideIndex) => (\n              <div key={slideIndex} className=\"flex-shrink-0 w-full snap-start\">\n                <div className=\"grid grid-cols-2 gap-4 md:gap-6\">\n                  {isLoading\n                    ? Array.from({ length: itemsPerPage }).map((_, idx) => (\n                        <div key={idx} className=\"h-48 bg-gray-300 rounded\" />\n                      ))\n                    : slide.map((product, index, array) => (\n                        <div\n                          key={product.id}\n                          ref={\n                            slideIndex === slides.length - 1 && index === array.length - 1\n                              ? lastProductRef\n                              : null\n                          }\n                          className=\"flex justify-center\"\n                        >\n                          {renderProductCard(product, false)}\n                        </div>\n                      ))}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      ) : (\n        <div className=\"grid grid-cols-4 gap-6 md:gap-6\">\n          {isLoading\n            ? Array.from({ length: itemsPerPage }).map((_, idx) => (\n                <div key={idx} className=\"h-48 bg-gray-300 rounded\" />\n              ))\n            : newArrivals\n                .slice(currentSlide * itemsPerPage, (currentSlide + 1) * itemsPerPage)\n                .map((product, index, array) => (\n                  <div\n                    key={product.id}\n                    ref={index === array.length - 1 ? lastProductRef : null}\n                    className=\"flex justify-center\"\n                  >\n                    {renderProductCard(product, false)}\n                  </div>\n                ))}\n        </div>\n      )}\n\n      <div className=\"flex flex-col items-center mt-4\">\n        <div className=\"flex space-x-2 mb-4\">\n          {Array.from({ length: totalSlides }).map((_, i) => (\n            <div\n              key={i}\n              className={`h-2 rounded-full transition-transform duration-300 ${\n                (isMobile ? mobileCurrentSlide : currentSlide) === i\n                  ? 'bg-blue-600 w-4 scale-125'\n                  : 'bg-gray-300 w-2'\n              }`}\n            />\n          ))}\n        </div>\n        <Button\n          onClick={handleViewAll}\n          className=\"text-black border-2 border-green-600 bg-transparent hover:bg-blue-50 px-4 py-2 rounded transition-all\"\n        >\n          Дивитись всі\n        </Button>\n      </div>\n    </section>\n  );\n};\n\nexport default NewArrivalsSection;"],"names":["NewArrivalsSection","newArrivals","currentSlide","onSlideChange","lastProductRef","renderProductCard","isMobile","isLoading","itemsPerPage","totalSlides","navigate","useNavigate","mobileCurrentSlide","setMobileCurrentSlide","useState","containerRef","useRef","handleScroll","scrollLeft","slideWidth","index","handleViewAll","slides","_","slideIndex","jsxs","jsx","Button","ChevronLeft","ChevronRight","slide","idx","product","array","i"],"mappings":"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"}