{"version":3,"file":"SaleProductsSection-BXFS9jbG.js","sources":["../../src/pagesHome/HomeSections/SaleProductsSection.tsx"],"sourcesContent":["import React, { useRef, useState } from 'react';\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\nimport { Button } from '../../components/ui/button';\nimport { Product } from '../Home';\nimport { useNavigate } from 'react-router-dom';\n\ninterface SaleProductsSectionProps {\n  saleProducts: Product[];\n  lastProductRef: (node: HTMLDivElement | null) => void;\n  renderProductCard: (product: Product, isLazy?: boolean, className?: string) => JSX.Element;\n  isLoading?: boolean;\n  isMobile: boolean;\n}\n\nconst SaleProductsSection: React.FC<SaleProductsSectionProps> = ({\n  saleProducts,\n  lastProductRef,\n  renderProductCard,\n  isLoading = false,\n  isMobile,\n}) => {\n  // Определяем количество товаров на странице: для мобильной – 2, для десктопа – 4.\n  const itemsPerPage = isMobile ? 2 : 4;\n  const totalSlides = Math.ceil(saleProducts.length / itemsPerPage);\n  const [currentSlide, setCurrentSlide] = useState(0);\n  const navigate = useNavigate();\n\n  // Ref для контейнера мобильного скролла\n  const containerRef = useRef<HTMLDivElement>(null);\n\n  // Обработчик скролла для мобильной версии\n  const handleScroll = () => {\n    if (containerRef.current) {\n      const scrollLeft = containerRef.current.scrollLeft;\n      const containerWidth = containerRef.current.clientWidth;\n      const slideIndex = Math.round(scrollLeft / containerWidth);\n      setCurrentSlide(slideIndex);\n    }\n  };\n\n  // Обработчики для десктопной версии\n  const handlePrev = () => {\n    setCurrentSlide(currentSlide > 0 ? currentSlide - 1 : totalSlides - 1);\n  };\n\n  const handleNext = () => {\n    setCurrentSlide(currentSlide < totalSlides - 1 ? currentSlide + 1 : 0);\n  };\n\n  // Для мобильной версии группируем товары по слайдам (по 2 товара)\n  const slides = isMobile\n    ? Array.from({ length: totalSlides }, (_, slideIndex) =>\n        saleProducts.slice(slideIndex * itemsPerPage, (slideIndex + 1) * itemsPerPage)\n      )\n    : [];\n\n  return (\n    <section id=\"sale\" className=\"mb-10\">\n      {/* Заголовок и кнопки переключения в одном flex-контейнере */}\n      <div className=\"flex items-center mb-6 justify-center lg:justify-between\">\n        <h2 className=\"text-2xl lg:text-3xl font-bold text-center lg:text-left\">Акційні пропозиції</h2>\n        {!isMobile && !isLoading && saleProducts.length > 0 && (\n          <div className=\"flex space-x-2\">\n            <Button\n              onClick={handlePrev}\n              className=\"bg-blue-600/80 text-white hover:bg-blue-400 transition-transform duration-150\"\n              size=\"icon\"\n            >\n              <ChevronLeft className=\"h-4 w-4\" />\n            </Button>\n            <Button\n              onClick={handleNext}\n              className=\"bg-blue-600/80 text-white hover:bg-blue-400 transition-transform duration-150\"\n              size=\"icon\"\n            >\n              <ChevronRight className=\"h-4 w-4\" />\n            </Button>\n          </div>\n        )}\n      </div>\n\n      {/* Отображение товаров */}\n      {isMobile ? (\n        // Мобильная версия: использование нативного горизонтального скролла с CSS scroll snap\n        <div\n          ref={containerRef}\n          onScroll={handleScroll}\n          className=\"relative overflow-x-auto rounded-[12px] scroll-smooth snap-x snap-mandatory\"\n          style={{ WebkitOverflowScrolling: 'touch' }}\n        >\n          <div className=\"flex\">\n            {slides.map((slide, slideIndex) => (\n              <div key={slideIndex} className=\"flex-shrink-0 w-full snap-start\">\n                <div className=\"grid grid-cols-2 gap-4 md:gap-6\">\n                  {isLoading\n                    ? Array.from({ length: itemsPerPage }).map((_, idx) => (\n                        <div key={idx} className=\"h-48 w-full bg-gray-300 rounded\" />\n                      ))\n                    : slide.map((product, index, array) => (\n                        <div\n                          key={`sale-${product.id}`}\n                          ref={\n                            slideIndex === slides.length - 1 && index === array.length - 1\n                              ? lastProductRef\n                              : null\n                          }\n                          className=\"flex justify-center\"\n                        >\n                          {renderProductCard(product, false)}\n                        </div>\n                      ))}\n                </div>\n              </div>\n            ))}\n          </div>\n        </div>\n      ) : (\n        // Десктопная версия: вывод товаров в виде сетки\n        <div className=\"grid grid-cols-4 gap-4 md:gap-6\">\n          {isLoading\n            ? Array.from({ length: itemsPerPage }).map((_, idx) => (\n                <div key={idx} className=\"h-48 w-full bg-gray-300 rounded\" />\n              ))\n            : saleProducts\n                .slice(currentSlide * itemsPerPage, (currentSlide + 1) * itemsPerPage)\n                .map((product, index, array) => (\n                  <div\n                    key={`sale-${product.id}`}\n                    ref={index === array.length - 1 ? lastProductRef : null}\n                    className=\"flex justify-center\"\n                  >\n                    {renderProductCard(product, false)}\n                  </div>\n                ))}\n        </div>\n      )}\n\n      {/* Нижняя часть: индикаторы слайдов и кнопка \"Дивитись всі\" */}\n      <div className=\"flex flex-col items-center mt-4\">\n        <div className=\"flex space-x-2 mb-2\">\n          {Array.from({ length: totalSlides }).map((_, i) => (\n            <div\n              key={i}\n              className={`h-2 rounded-full transition-transform duration-300 ${\n                i === currentSlide ? 'bg-blue-600 w-4 scale-125' : 'bg-gray-300 w-2'\n              }`}\n            />\n          ))}\n        </div>\n        <Button\n          onClick={() => navigate(\"/tires?sale=true\")}\n          className=\"text-black border-2 border-green-600 bg-transparent hover:bg-blue-50 px-4 py-2 rounded transition-all mt-2\"\n        >\n          Дивитись всі\n        </Button>\n      </div>\n    </section>\n  );\n};\n\nexport default SaleProductsSection;\n"],"names":["SaleProductsSection","saleProducts","lastProductRef","renderProductCard","isLoading","isMobile","itemsPerPage","totalSlides","currentSlide","setCurrentSlide","useState","navigate","useNavigate","containerRef","useRef","handleScroll","scrollLeft","containerWidth","slideIndex","handlePrev","handleNext","slides","_","jsxs","jsx","Button","ChevronLeft","ChevronRight","slide","idx","product","index","array","i"],"mappings":"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"}